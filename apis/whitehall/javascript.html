
<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>whitehall: Whitehall JavaScript Styleguide - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/apis/whitehall/javascript.html">


      <meta property="og:image" content="https://docs.publishing.service.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="whitehall: Whitehall JavaScript Styleguide" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/apis/whitehall/javascript.html" />
      <meta property="twitter:card" content="summary" />
      <meta property="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta property="twitter:image" content="https://docs.publishing.service.gov.uk/images/govuk-large.png" />
      <meta property="twitter:title" content="whitehall: Whitehall JavaScript Styleguide - GOV.UK Developer Documentation" />
      <meta property="twitter:url" content="https://docs.publishing.service.gov.uk/apis/whitehall/javascript.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewbox="0 0 132 97"
            height="30"
            width="36"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
            ></path>
            <image src="/assets/images/govuk-logotype-crown.png" xlink:href="" class="govuk-header__logotype-crown-fallback-image" width="36" height="32"></image>
          </svg>
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
      <nav>
        <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/">Dashboard</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/apps.html">Apps</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual.html">Manual</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/apis.html">APIs</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </a>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents">
              <div class="search" data-module="search">
  <form action="https://www.google.co.uk/search" method="get" role="search">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
  <div id="search-results" class="search-results" aria-hidden="true" role="dialog" aria-labelledby="search-results-title">
    <div class="search-results__inner">
      <button class="search-results__close">Close<span class="search-results__close-label"> search results</span></button>
      <h2 id="search-results-title" class="search-results__title" aria-live="polite">Results</h2>
      <div class="search-results__content"></div>
    </div>
  </div>
</div>

              <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <ul>
    <li>
      <a href="/apps/email-alert-api.html"><span>email-alert-api</span></a>
      <ul>
          <li><a href="/apis/email-alert-api/analytics.html"><span>Analytics</span></a></li>
          <li><a href="/apis/email-alert-api/api.html"><span>Available endpoints</span></a></li>
          <li><a href="/apis/email-alert-api/fields.html"><span>fields</span></a></li>
          <li><a href="/apis/email-alert-api/matching-content-to-subscriber-lists.html"><span>Matching content to subscriber lists</span></a></li>
          <li><a href="/apis/email-alert-api/queues.html"><span>Queues</span></a></li>
          <li><a href="/apis/email-alert-api/support-tasks.html"><span>Support tasks</span></a></li>
          <li><a href="/apis/email-alert-api/transition-from-govdelivery-to-notify.html"><span>Transition from Govdelivery to Notify</span></a></li>
          <li><a href="/apis/email-alert-api/troubleshooting.html"><span>Troubleshooting</span></a></li>
      </ul>
    </li>
    <li>
      <a href="/apps/link-checker-api.html"><span>link-checker-api</span></a>
      <ul>
          <li><a href="/apis/link-checker-api/api.html"><span>Link Checker API's API</span></a></li>
          <li><a href="/apis/link-checker-api/blitz.html"><span>End of blitz summary - April 2017</span></a></li>
      </ul>
    </li>
    <li>
      <a href="/apps/publishing-api.html"><span>publishing-api</span></a>
      <ul>
          <li><a href="/apis/publishing-api/admin-tasks.html"><span>Admin Tasks</span></a></li>
          <li><a href="/apis/publishing-api/api.html"><span>Publishing API's API</span></a></li>
          <li><a href="/apis/publishing-api/dependency-resolution.html"><span>Dependency Resolution</span></a></li>
          <li><a href="/apis/publishing-api/link-expansion.html"><span>Link Expansion</span></a></li>
          <li><a href="/apis/publishing-api/model.html"><span>Publishing API's Model</span></a></li>
          <li><a href="/apis/publishing-api/pact_testing.html"><span>Contract testing with Pact</span></a></li>
          <li><a href="/apis/publishing-api/publishing-application-examples.html"><span>Publishing application examples</span></a></li>
          <li><a href="/apis/publishing-api/rabbitmq.html"><span>RabbitMQ</span></a></li>
      </ul>
    </li>
    <li>
      <a href="/apps/search-api.html"><span>search-api</span></a>
      <ul>
          <li><a href="/apis/search-api/adding-new-fields.html"><span>Adding new fields to a document type</span></a></li>
          <li><a href="/apis/search-api/content-api.html"><span>Content API</span></a></li>
          <li><a href="/apis/search-api/content_overview.html"><span>Content in the search index and where it comes from</span></a></li>
          <li><a href="/apis/search-api/documents.html"><span>Documents API (to be deprecated)</span></a></li>
          <li><a href="/apis/search-api/how-search-works.html"><span>How Search Works</span></a></li>
          <li><a href="/apis/search-api/indexing.html"><span>Indexing</span></a></li>
          <li><a href="/apis/search-api/learning-to-rank.html"><span>learning-to-rank</span></a></li>
          <li><a href="/apis/search-api/new-indexing-process.html"><span>Moving a format to the new indexing process</span></a></li>
          <li><a href="/apis/search-api/popularity.html"><span>Popularity information</span></a></li>
          <li><a href="/apis/search-api/publishing-finders.html"><span>Publishing finders</span></a></li>
          <li><a href="/apis/search-api/relevancy.html"><span>Relevancy</span></a></li>
          <li><a href="/apis/search-api/schemas.html"><span>Schema definitions</span></a></li>
          <li><a href="/apis/search-api/search-api.html"><span>Using the search API</span></a></li>
          <li><a href="/apis/search-api/search-quality-metrics.html"><span>Search Quality Metrics</span></a></li>
      </ul>
    </li>
    <li>
      <a href="/apps/whitehall.html"><span>whitehall</span></a>
      <ul>
          <li><a href="/apis/whitehall/api.html"><span>Whitehall API</span></a></li>
          <li><a href="/apis/whitehall/css.html"><span>Whitehall CSS Styleguide</span></a></li>
          <li><a href="/apis/whitehall/detailed_setup_guide.html"><span>Detailed setup guide</span></a></li>
          <li><a href="/apis/whitehall/edition_workflow.html"><span>Edition Workflow</span></a></li>
          <li><a href="/apis/whitehall/finders.html"><span>Finders</span></a></li>
          <li><a href="/apis/whitehall/internationalisation_guide.html"><span>Internationalisation guide</span></a></li>
          <li><a href="/apis/whitehall/javascript.html" class="toc-link--in-view"><span>Whitehall JavaScript Styleguide</span></a></li>
          <li><a href="/apis/whitehall/link_checker_api_integration.html"><span>Link Checker API Integrations</span></a></li>
          <li><a href="/apis/whitehall/search_setup_guide.html"><span>Search setup guide</span></a></li>
          <li><a href="/apis/whitehall/testing_guide.html"><span>Testing Guide</span></a></li>
          <li><a href="/apis/whitehall/timestamps.html"><span>Timestamps</span></a></li>
      </ul>
    </li>
  </ul>

              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
              <h1 class="page-title">whitehall: Whitehall JavaScript Styleguide</h1>

  
<p>Should be read in conjunction with the <a href="https://github.com/alphagov/styleguides/blob/master/js.md">GOV.UK JS styleguide</a></p>
<h2 id="code-style">Code style</h2>
<h3 id="self-documenting-javascript-and-avoiding-loose-code">Self-documenting javascript and avoiding 'loose code'</h3>
<p>If care is taken to write communicative code, javascript can quickly become extremely difficult to read, especially when excessive jQuery-style chaining is happening. Being mindful of how communicative one's code is to other developers is of course a given as with all languages, but there are certain practices which can help make code easier to follow in javascript.</p>
<h4 id="avoid-loose-code">Avoid loose code</h4>
<p><strong>Loose code is code whose function or effect is not described by the name of the containing function.</strong></p>
<p>Consider the following two examples:</p>
<pre><code>function init() {
  $('ol.lemmings li a.linky_link').map(function(linky_linky) {
    $(linky_linky).after('&lt;span&gt;blot&lt;/span&gt;');
  });
}
</code></pre>
<p>and</p>
<pre><code>function init() {
  addBlotsToLemmingLinks();
}

function addBlotsToLemmingLinks() {
  $('ol.lemmings li a.linky_link').map(function(linky_linky) {
    $(linky_linky).after('&lt;span&gt;blot&lt;/span&gt;');
  });
}
</code></pre>
<p>In the second example, there's no need to read into the jQuery bits to see what the purpose of that piece of code is.</p>
<h4 id="use-many-small-functions">Use many small functions</h4>
<p>Keeping functions small and using loads of them intrinsicly makes javascript more self-documenting. It may even be beneficial to break a function's code into small private nested functions:</p>
<pre><code>function showLightbox() {
  buildDomElements();
  appendToDom();
  bindEvents();
  show();

  function buildDomElements() {
    // some code
  }

  function appendToDom() {
    // some code
  }

  function bindEvents() {
    // some code
  }

  function show() {
    // some code
  }
}
</code></pre>
<p><em>However</em> in these cases, it would be best to first think about whether the function is doing too much.</p>
<h4 id="avoid-excessive-chaining">Avoid excessive chaining</h4>
<p>jQuery and a few other libraries allow you to chain functions together. This can be nice, but if done excessively can make things very hard to read:</p>
<pre><code>function doSomethingToTheDom() {
  $('.something').find('.something_else').next('label').css('background-color', 'red').click(function() {doSomething();}).click();
}
</code></pre>
<p>In this case, there's no need for the two finders at the start, and it would be far more readable if split out into several lines:</p>
<pre><code>function doSomethingToTheDom() {
  var $somethingElse = $('.something .something_else');
  var $label = $somethingElse.next('label');
  $label.css('background-color', 'red');
  $label.click(doSomething);
  doSomething();

  function doSomething() {
    // ...
  }
}
</code></pre>
<h3 id="patterns">Patterns</h3>
<p>All code should be wrapped in a closure and should declare <code>use strict</code>.  The GOVUK namespace should be setup in each file to promote portability.</p>
<pre><code>(function() {
  "use strict";
  window.GOVUK = window.GOVUK || {};

  // stuff
}());
</code></pre>
<p>There are two patterns which can be employed in Whitehall, a singleton pattern and a constructor pattern and it's a case of choosing the right tool for the right job.</p>
<h4 id="singleton-pattern">Singleton pattern</h4>
<p>Singletons should be defined as raw JavaScript hashes, and if required should do its initialisation in a function called init.</p>
<pre><code>(function() {
  "use strict";
  window.GOVUK = window.GOVUK || {};

  window.GOVUK.singletonThing = {
    init: function init() {

    },

    anotherFunction: function anotherFunction() {

    },

    // etc.
  };
}());
</code></pre>
<h4 id="constructor-pattern">Constructor pattern</h4>
<p>Constructors should follow the prototype pattern as follows:</p>
<pre><code>(function() {
  "use strict";
  window.GOVUK = window.GOVUK || {};

  function TheThing(options) {
    // some initialisation code
  }

  TheThing.prototype.someFunction = function someFunction() {
    // do some stuff
  };

  GOVUK.TheThing = TheThing;
}());
</code></pre>
<p>Defining functions on the prototype as opposed to defining them privately in the constructor exposes them making the objects easier to test. Although in theory you should never test a private method, it's sometimes helpful to do so in JavaScript - particularly when testing objects which are very tightly coupled to the DOM and often don't have any public API.</p>
<p>Defining the constructor in the wrapper function's scope, then assigning it to the namespace improves readability by keeping names shorter.</p>
<p>This pattern works well for creating views (in the Backbone sense) to control a DOM element. You probably want to add this line to your constructor to initialise the view against a DOM element:</p>
<pre><code>this.$el = $(options.el);
</code></pre>
<p>The view can then be initialised with a selector for the DOM element is controlling:</p>
<pre><code>GOVUK.init(GOVUK.TheThing, {el: '.js-the-thing'});
</code></pre>
<p>See "Script initialisation" below for more details on <code>GOVUK.init</code>.</p>
<h5 id="proxying-function-when-using-the-prototype-constructor-pattern">Proxying function when using the prototype / constructor pattern</h5>
<p>One of the main problems with the prototype / constructor pattern is the need to proxy functions in order to avoid loss of context. Here's an example of the problem:</p>
<pre><code>function SillyRedButton(options) {
  $('#the_big_red_button').click(this.makeSillyNoise);
};

SillyRedButton.prototype.makeSillyNoise = function makeSillyNoise() {
  this.playSoundEffect("a_silly_noise");
};

SillyRedButton.prototype.playSoundEffect = function playSoundEffect(soundEffect) {
  SomeSoundLibrary.play(soundEffect);
};
</code></pre>
<p>This script will break on the call <code>this.playSoundEffect()</code> because that function will be called in the context of the button clicked on, not the constructed object. GOVUK.Proxifier can make this problem go away with a single call in the constructor function and no further changes to the script:</p>
<pre><code>function SillyRedButton(options) {
  GOVUK.Proxifier.proxifyAllMethods(this);
  $('#the_big_red_button').click(this.makeSillyNoise);
};

SillyRedButton.prototype.makeSillyNoise = function makeSillyNoise() {
  this.playSoundEffect("a_silly_noise");
};

SillyRedButton.prototype.playSoundEffect = function playSoundEffect(soundEffect) {
  SomeSoundLibrary.play(soundEffect);
};
</code></pre>
<p>To proxify only single methods, use <code>GOVUK.Proxifier.ProxifyMethods(object, [methodNames])</code> or <code>GOVUK.Proxifier.ProxifyMethod(object, methodName)</code></p>
<h3 id="other-style-points">Other style points</h3>
<p>Favour named arguments in a hash over sequential arguments. <a href="http://en.wikipedia.org/wiki/Connascence_%28computer_programming%29#Types_of_connascence">Connascence of naming is a weaker form of connascence than connascence of position</a>.</p>
<p>In general, use of anonymous functions should be avoided. Code made up of anonymous functions is more difficult to profile and debug.  Anonymous functions don't report a name to profilers, stack traces and when calling <code>arguments.callee.caller</code>, etc.</p>
<p>bad:</p>
<pre><code>TheThing.prototype.someFunction = function() {
  //do some stuff
};
new TheThing().someFunction.name;  //  ==&gt; ''
</code></pre>
<p>good:</p>
<pre><code>TheThing.prototype.someFunction = function someFunction() {
  //do some stuff
};
new TheThing().someFunction.name;  //  ==&gt; 'someFunction'
</code></pre>
<h2 id="file-structure-and-namespacing">File structure and namespacing</h2>
<p>Each JavaScript object should be stored in its own file with a filename reflecting the object name. In the spirit of keeping things similar to the CSS, they should be stored in:</p>
<pre><code>./helpers/
./frontend/views/
./frontend/modules/
./frontend/helpers/
./admin/views/
./admin/modules/
./admin/helpers/
</code></pre>
<p><strong>Views</strong> are view-specific scripts and as with the css, their file path and name should exactly mirror the view template or partial it applies to. The name of the script object should reflect the whole view path (the object in <code>/admin/editions/index.js</code> should be called <code>GOVUK.adminEditionsIndex</code>).</p>
<p><strong>Modules</strong> are re-useable things. An example of a module would be the script for a tabbed content block. Modules should not be initialised globaly, and should only be initialised when needed, by the layout / partial which needs it (see script initialisation). If a script is only ever going to be used in one place, don't make it a module.</p>
<p><strong>Helpers</strong> are scripts which are loaded everywhere (such as the script which prevents forms from being submited twice).</p>
<p>Namespaces should be kept simple and all constructors should be under <code>GOVUK</code>. The JavaScript layer is thin for whitehall and so (at least at present) there's no need to use deeper namespaces.</p>
<h2 id="script-initialisation">Script initialisation</h2>
<p>Scripts should be initialised with <code>GOVUK.init</code>:</p>
<pre><code>GOVUK.init(GOVUK.SomeScript, {el: '.js-the-thing'});
</code></pre>
<p>If the passed in object is a constructor, <code>GOVUK.init</code> creates an instance of the passed in constructor, passing the second argument through as an argument. A reference to the new instance is stored in <code>GOVUK.instances</code>.</p>
<p>Otherwise, <code>GOVUK.init</code> will call init on the passed in hash, treating it as a singleton.</p>
<p>Scripts should only be initialised when needed and should make use of the rails helper <code>initialise_script</code>:</p>
<pre><code>#!erb
&lt;% initialise_script "GOVUK.SomeView", el: '.js-some-view' %&gt;
</code></pre>
<p>This rails helper takes a ruby hash as a second argument, which is jsonified and passed down to the javascript constructor (in content_for block <code>:javascript_initialisers</code>). This is not done in <code>$.ready</code> by default, so if the script needs to wait for $.ready, it should do so itself.</p>
<p>This initialise_script line should be in the most appropriate template/partial for view scripts / view-specific helpers, and should be near the <code>:javascript_initialisers</code> yield in the applicable layout for site-wide helpers.</p>
<h2 id="css-selectors">CSS selectors</h2>
<p>Scripts should only make use of CSS classes beginning with <code>js-</code>. <a href="https://github.com/alphagov/styleguides/blob/master/js.md#use-a-js--prefix-for-js-only-html-classes">This makes it completely transparent what the class is used for within the HTML</a>.</p>
<h3 id="styles">Styles</h3>
<p>If you want to add styles to things with the knowledge that JavaScript is available on the page you can take advantage of the <code>js-enabled</code> class we add to the body element. So if you know an element need to be hidden when JavaScript is available you can use:</p>
<pre><code>.my-toggle-body {
  .js-enabled &amp; {
    display: none;
  }
}
</code></pre>


            
          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/whitehall/blob/master/docs/javascript.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?labels=bug&amp;title=Re:%20''&amp;body=Problem%20with%20''%20(https://docs.publishing.service.gov.uk/apis/whitehall/javascript.html)">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >Â© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/application.js"></script>
  </body>
</html>
