


<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>Cookie consent on GOV.UK - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/manual/cookie-consent-on-govuk.html">


      <meta property="og:image" content="https://docs.publishing.service.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="Cookie consent on GOV.UK" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/manual/cookie-consent-on-govuk.html" />
      <meta property="twitter:card" content="summary" />
      <meta property="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta property="twitter:image" content="https://docs.publishing.service.gov.uk/images/govuk-large.png" />
      <meta property="twitter:title" content="Cookie consent on GOV.UK - GOV.UK Developer Documentation" />
      <meta property="twitter:url" content="https://docs.publishing.service.gov.uk/manual/cookie-consent-on-govuk.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewbox="0 0 132 97"
            height="30"
            width="36"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
            ></path>
            <image src="/assets/images/govuk-logotype-crown.png" xlink:href="" class="govuk-header__logotype-crown-fallback-image" width="36" height="32"></image>
          </svg>
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
      <nav>
        <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/">Dashboard</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/apps.html">Apps</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/manual.html">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/apis.html">APIs</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </a>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents">
              <div class="search" data-module="search">
  <form action="https://www.google.co.uk/search" method="get" role="search">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
  <div id="search-results" class="search-results" aria-hidden="true" role="dialog" aria-labelledby="search-results-title">
    <div class="search-results__inner">
      <button class="search-results__close">Close<span class="search-results__close-label"> search results</span></button>
      <h2 id="search-results-title" class="search-results__title" aria-live="polite">Results</h2>
      <div class="search-results__content"></div>
    </div>
  </div>
</div>

              <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <a href='/manual.html' class="toc__back-link govuk-link">&lsaquo; Manual</a>
  <ul>
  <li>
    <a href="#header"><span>Cookie consent on GOV.UK</span></a>
    <ul>
      <li>
        <a href="#overview"><span>Overview</span></a>
      </li>
      <li>
        <a href="#cookie-consent-mechanism"><span>Cookie consent mechanism</span></a>
      </li>
      <li>
        <a href="#special-cases"><span>Special Cases</span></a>
        <ul>
          <li>
            <a href="#google-analytics"><span>Google Analytics</span></a>
          </li>
          <li>
            <a href="#youtube"><span>Youtube</span></a>
          </li>
          <li>
            <a href="#no-javascript"><span>No Javascript</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#adding-a-new-cookie"><span>Adding a new cookie</span></a>
      </li>
      <li>
        <a href="#changing-a-cookies-category"><span>Changing a cookie’s category</span></a>
      </li>
      <li>
        <a href="#adding-a-cookie-category"><span>Adding a cookie category</span></a>
      </li>
      <li>
        <a href="#removing-a-cookie-category"><span>Removing a cookie category</span></a>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            
  <p><a href='/manual.html#cookies'>Cookies</a></p> <h1 id='header'>Cookie consent on GOV.UK</h1><p>This is technical documentation for the <a href="https://www.gov.uk/">GOV.UK</a> team in the <a href="https://gds.blog.gov.uk/about/">Government
Digital Service (GDS)</a>.</p>
<h2 id='overview'>Overview</h2><p>GOV.UK sets 4 types of cookies: essential (also called &ldquo;strictly necessary&rdquo;); website usage; communications and marketing; settings. These are detailed on the <a href="https://www.gov.uk/help/cookies">cookie settings page on GOV.UK</a>.</p>
<p>Users can manage their consent via the banner or <a href="https://www.gov.uk/help/cookies">cookie settings page</a>. &ldquo;Strictly necessary&rdquo; cookies cannot be switched off by users as they&rsquo;re essential to site functionality.</p>
<p>Cookie consent is set to last for 1 year, after which the consent cookie will expire and users will be shown the cookie banner and prompted for consent again.</p>
<h2 id='cookie-consent-mechanism'>Cookie consent mechanism</h2><p>The cookie consent mechanism is made up of 4 main pieces:</p>

<ul>
<li>  <a href="https://govuk-publishing-components.herokuapp.com/component-guide/cookie_banner">Cookie banner component</a></li>
<li>  <a href="https://github.com/alphagov/static/blob/54706a6eddcf71e2d6cd36b3239798293530d4e6/app/views/layouts/govuk_template.html.erb#L50">Page template which pulls in the cookie banner</a></li>
<li>  <a href="https://www.gov.uk/help/cookies">cookie settings page</a>. This is published as a <a href="/manual/publish_special_routes.html">special route</a>. See the <a href="https://github.com/alphagov/frontend/blob/master/app/views/help/cookie_settings.html.erb">Cookie settings page in Frontend GitHub repo</a>.</li>
<li>  <a href="https://www.gov.uk/help/cookie-details">Cookie details page</a>. This is a standard help page, created in Publisher.</li>
</ul>
<p>When a user first lands on GOV.UK, they are given a default consent cookie that looks like this:</p>
<p><code>cookies_policy={&quot;essential&quot;:true,&quot;settings&quot;:false,&quot;usage&quot;:false,&quot;campaigns&quot;:false}</code></p>
<p>This cookies_policy cookie is the key to the GOV.UK cookie consent mechanism. If any of these values read as false, cookies of that type will not be set.</p>
<p>For example, the below cookie will result in Google Analytics tracking being disabled for that user:</p>
<p><code>cookies_policy={&quot;essential&quot;:true,&quot;settings&quot;:true,&quot;usage&quot;:false,&quot;campaigns&quot;:true}</code></p>
<p>If the user clicks “Accept cookies” within the cookie banner or changes their cookie settings on the settings page, they get an additional cookie that ensures they don’t see the cookie banner again:</p>
<p><code>cookies_preferences_set</code></p>
<p>Users can still change their consent via the <a href="https://www.gov.uk/help/cookies">cookie settings page</a>.</p>
<h2 id='special-cases'>Special Cases</h2><h3 id='google-analytics'>Google Analytics</h3><p>GOV.UK uses <a href="https://docs.publishing.service.gov.uk/manual/analytics.html">Google Analytics</a> to track user journeys.</p>
<p>Unlike other cookies on GOV.UK, Google Analytics (GA) cookies are not set using our cookie helpers. GA cookies are initialised within Static. Therefore, as well as deleting the GA cookies, we also need to <a href="https://github.com/alphagov/static/blob/master/app/assets/javascripts/analytics/static-analytics.js#L21">wrap the initialisation of GOVUK.Analytics</a> to ensure the cookies are not recreated.</p>
<p>We also set the following property to disable tracking:</p>
<p><code>window[&#39;ga-disable-UA-26179049-1&#39;] = true;</code>`</p>
<p>This is the <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/user-opt-out">recommended approach</a> by Google for user opt-out of tracking.</p>
<h3 id='youtube'>Youtube</h3><p>Some pages on GOV.UK contain embedded Youtube videos. On these pages, Youtube sets third-party cookies which we are unable to delete.</p>
<p>If a user does not consent to campaign cookies, we <a href="https://govuk-publishing-components.herokuapp.com/component-guide/govspeak/with_youtube_embed_disabled">swap the embedded video for a link to the video on Youtube</a>. This means that Youtube does not set any third-party cookies because the video is no longer embedded.</p>
<h3 id='no-javascript'>No Javascript</h3><p>If Javascript is turned off, the “accept” button is removed from the banner and the cookie settings form is removed. A message is shown instead.</p>
<h2 id='adding-a-new-cookie'>Adding a new cookie</h2><p>If your cookie is set using Javascript:</p>

<ol>
<li>Decide which category the cookie falls into</li>
<li>Add the cookie to the <a href="https://github.com/alphagov/govuk_publishing_components/blob/master/app/assets/javascripts/govuk_publishing_components/lib/cookie-functions.js#L14">list of known cookies</a></li>
<li><p>When reading and setting the cookie, make sure you use the cookie helper functions within govuk_publishing_components, e.g:</p>
<p><code>window.GOVUK.cookie(‘please set this cookie’, ‘to this value’)</code></p>
<p><code>window.GOVUK.cookie(‘please fetch this cookie’)</code></p></li>
</ol>
<p>Regardless of how your cookie is set, you need to update the cookie details page to list the new cookie. A content designer should be able to help with that.</p>
<h2 id='changing-a-cookies-category'>Changing a cookie’s category</h2><p>If your cookie is set using Javascript:</p>

<ol>
<li>Decide which category the cookie falls into</li>
<li>Change the category the cookie is associated with, in the <a href="https://github.com/alphagov/govuk_publishing_components/blob/master/app/assets/javascripts/govuk_publishing_components/lib/cookie-functions.js#L14">list of known cookies</a></li>
</ol>
<p>Regardless of how your cookie is set, you need to do the following:</p>

<ul>
<li>  update the cookie details page to list the cookie under the correct section. A content designer should be able to help with that.</li>
<li>  Update the category descriptions on the cookie settings page if they are no longer correct</li>
<li>  Reset the banner for all users. Otherwise the consent cookie will stay as the old value reflecting the user’s previous decision, which could change given the new category.</li>
</ul>
<h2 id='adding-a-cookie-category'>Adding a cookie category</h2>
<ul>
<li>  Add the new cookie category to the <a href="https://github.com/alphagov/frontend/blob/master/app/views/help/cookie_settings.html.erb">Cookie settings page in Frontend GitHub repo</a></li>
<li>  Add the new cookie category to the <a href="https://www.gov.uk/help/cookie-details">Cookie details page</a> using Publisher.</li>
<li>  Add to the default consent cookie</li>
<li>  Add to ‘approve all’ consent cookie function</li>
<li>  Add relevant cookies within the list of known cookies</li>
<li>  Reset the banner for all users. Otherwise the consent cookie will stay as the old value (without the new category) for people who already have the consent cookie, so setting cookies of that new type will fail for those users</li>
</ul>
<h2 id='removing-a-cookie-category'>Removing a cookie category</h2>
<ul>
<li>  Remove the cookie category from <a href="https://github.com/alphagov/frontend/blob/master/app/views/help/cookie_settings.html.erb">Cookie settings page in Frontend GitHub repo</a></li>
<li>  Remove the cookie category from <a href="https://www.gov.uk/help/cookie-details">Cookie details page</a> using Publisher. Delete cookies or move to another relevant category</li>
<li>  Remove the cookie category from default consent cookie</li>
<li>  Remove the cookie category from &lsquo;approve all consent cookie&rsquo; function</li>
<li>  Remove cookies from known list OR move to another relevant category</li>
</ul>


  <div class='related-content'>

    <h3>More in the Cookies section</h3>

    <div class='govuk-grid-row'>
        <div class='govuk-grid-column-one-half'>
          <h4>Learn</h4>

          <ul class="govuk-list">
            <li><a href="/manual/cookies-and-sessions-in-frontend-apps.html">Cookies and sessions in GOV.UK frontend apps</a></li>
          </ul>
        </div>


    </div>
</div>


              <div data-module='page-expiry' data-last-reviewed-on="2020-06-19">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 19 December 2019.

        It needs to be reviewed again on 19 June 2020
        by the page owner <a href="">#govuk-developers</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 19 June 2020
       by the page owner <a href="">#govuk-developers</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/govuk-developer-docs/blob/master/source/manual/cookie-consent-on-govuk.html.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?labels=bug&amp;title=Re:%20'Cookie%20consent%20on%20GOV.UK'&amp;body=Problem%20with%20'Cookie%20consent%20on%20GOV.UK'%20(https://docs.publishing.service.gov.uk/manual/cookie-consent-on-govuk.html)">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/application.js"></script>
  </body>
</html>
