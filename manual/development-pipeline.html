


<!doctype html>
<html lang="en" class="govuk-template no-js">
  <head>
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">

    <title>The development and deployment pipeline - GOV.UK Developer Documentation</title>

    <link href="/stylesheets/manifest.css" rel="stylesheet" />

    <link rel="canonical" href="https://docs.publishing.service.gov.uk/manual/development-pipeline.html">


      <meta property="og:image" content="https://docs.publishing.service.gov.uk/images/govuk-large.png" />
      <meta property="og:site_name" content="GOV.UK Developer Documentation" />
      <meta property="og:title" content="The development and deployment pipeline" />
      <meta property="og:type" content="object" />
      <meta property="og:url" content="https://docs.publishing.service.gov.uk/manual/development-pipeline.html" />
      <meta property="twitter:card" content="summary" />
      <meta property="twitter:domain" content="docs.publishing.service.gov.uk" />
      <meta property="twitter:image" content="https://docs.publishing.service.gov.uk/images/govuk-large.png" />
      <meta property="twitter:title" content="The development and deployment pipeline - GOV.UK Developer Documentation" />
      <meta property="twitter:url" content="https://docs.publishing.service.gov.uk/manual/development-pipeline.html" />

    
  </head>

  <body class="govuk-template__body">
    <script>document.body.className = ((document.body.className) ? document.body.className + ' js-enabled' : 'js-enabled');</script>

    <div class="app-pane">
      <div class="app-pane__header toc-open-disabled">
        <a href="#content" class="govuk-skip-link">Skip to main content</a>

        <header class="govuk-header app-header" role="banner" data-module="govuk-header">
  <div class="govuk-header__container govuk-header__container--full-width">
    <div class="govuk-header__logo">
      <a href="/" class="govuk-header__link govuk-header__link--homepage">
        <span class="govuk-header__logotype">
          <svg
            aria-hidden="true"
            focusable="false"
            class="govuk-header__logotype-crown"
            xmlns="http://www.w3.org/2000/svg"
            viewbox="0 0 132 97"
            height="30"
            width="36"
          >
            <path
              fill="currentColor" fill-rule="evenodd"
              d="M25 30.2c3.5 1.5 7.7-.2 9.1-3.7 1.5-3.6-.2-7.8-3.9-9.2-3.6-1.4-7.6.3-9.1 3.9-1.4 3.5.3 7.5 3.9 9zM9 39.5c3.6 1.5 7.8-.2 9.2-3.7 1.5-3.6-.2-7.8-3.9-9.1-3.6-1.5-7.6.2-9.1 3.8-1.4 3.5.3 7.5 3.8 9zM4.4 57.2c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.5-1.5-7.6.3-9.1 3.8-1.4 3.5.3 7.6 3.9 9.1zm38.3-21.4c3.5 1.5 7.7-.2 9.1-3.8 1.5-3.6-.2-7.7-3.9-9.1-3.6-1.5-7.6.3-9.1 3.8-1.3 3.6.4 7.7 3.9 9.1zm64.4-5.6c-3.6 1.5-7.8-.2-9.1-3.7-1.5-3.6.2-7.8 3.8-9.2 3.6-1.4 7.7.3 9.2 3.9 1.3 3.5-.4 7.5-3.9 9zm15.9 9.3c-3.6 1.5-7.7-.2-9.1-3.7-1.5-3.6.2-7.8 3.7-9.1 3.6-1.5 7.7.2 9.2 3.8 1.5 3.5-.3 7.5-3.8 9zm4.7 17.7c-3.6 1.5-7.8-.2-9.2-3.8-1.5-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.3 3.5-.4 7.6-3.9 9.1zM89.3 35.8c-3.6 1.5-7.8-.2-9.2-3.8-1.4-3.6.2-7.7 3.9-9.1 3.6-1.5 7.7.3 9.2 3.8 1.4 3.6-.3 7.7-3.9 9.1zM69.7 17.7l8.9 4.7V9.3l-8.9 2.8c-.2-.3-.5-.6-.9-.9L72.4 0H59.6l3.5 11.2c-.3.3-.6.5-.9.9l-8.8-2.8v13.1l8.8-4.7c.3.3.6.7.9.9l-5 15.4v.1c-.2.8-.4 1.6-.4 2.4 0 4.1 3.1 7.5 7 8.1h.2c.3 0 .7.1 1 .1.4 0 .7 0 1-.1h.2c4-.6 7.1-4.1 7.1-8.1 0-.8-.1-1.7-.4-2.4V34l-5.1-15.4c.4-.2.7-.6 1-.9zM66 92.8c16.9 0 32.8 1.1 47.1 3.2 4-16.9 8.9-26.7 14-33.5l-9.6-3.4c1 4.9 1.1 7.2 0 10.2-1.5-1.4-3-4.3-4.2-8.7L108.6 76c2.8-2 5-3.2 7.5-3.3-4.4 9.4-10 11.9-13.6 11.2-4.3-.8-6.3-4.6-5.6-7.9 1-4.7 5.7-5.9 8-.5 4.3-8.7-3-11.4-7.6-8.8 7.1-7.2 7.9-13.5 2.1-21.1-8 6.1-8.1 12.3-4.5 20.8-4.7-5.4-12.1-2.5-9.5 6.2 3.4-5.2 7.9-2 7.2 3.1-.6 4.3-6.4 7.8-13.5 7.2-10.3-.9-10.9-8-11.2-13.8 2.5-.5 7.1 1.8 11 7.3L80.2 60c-4.1 4.4-8 5.3-12.3 5.4 1.4-4.4 8-11.6 8-11.6H55.5s6.4 7.2 7.9 11.6c-4.2-.1-8-1-12.3-5.4l1.4 16.4c3.9-5.5 8.5-7.7 10.9-7.3-.3 5.8-.9 12.8-11.1 13.8-7.2.6-12.9-2.9-13.5-7.2-.7-5 3.8-8.3 7.1-3.1 2.7-8.7-4.6-11.6-9.4-6.2 3.7-8.5 3.6-14.7-4.6-20.8-5.8 7.6-5 13.9 2.2 21.1-4.7-2.6-11.9.1-7.7 8.8 2.3-5.5 7.1-4.2 8.1.5.7 3.3-1.3 7.1-5.7 7.9-3.5.7-9-1.8-13.5-11.2 2.5.1 4.7 1.3 7.5 3.3l-4.7-15.4c-1.2 4.4-2.7 7.2-4.3 8.7-1.1-3-.9-5.3 0-10.2l-9.5 3.4c5 6.9 9.9 16.7 14 33.5 14.8-2.1 30.8-3.2 47.7-3.2z"
            ></path>
            <image src="/assets/images/govuk-logotype-crown.png" xlink:href="" class="govuk-header__logotype-crown-fallback-image" width="36" height="32"></image>
          </svg>
          <span class="govuk-header__logotype-text">
            GOV.UK
          </span>
        </span>
        <span class="govuk-header__product-name">
          Developer docs
        </span>
      </a>
    </div>
    <div class="govuk-header__content">
      <button type="button" class="govuk-header__menu-button govuk-js-header-toggle" aria-controls="navigation" aria-label="Show or hide Top Level Navigation">Menu</button>
      <nav>
        <ul id="navigation" class="govuk-header__navigation govuk-header__navigation--end" aria-label="Top Level Navigation">
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/">Dashboard</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/manual/get-started.html">Get started</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/apps.html">Apps</a>
            </li>
            <li class="govuk-header__navigation-item govuk-header__navigation-item--active">
              <a class="govuk-header__link" href="/manual.html">Manual</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/apis.html">APIs</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/content-schemas.html">Schemas</a>
            </li>
            <li class="govuk-header__navigation-item">
              <a class="govuk-header__link" href="/document-types.html">Document types</a>
            </li>
        </ul>
      </nav>
    </div>
  </div>
</header>

      </div>

        <div id="toc-heading" class="toc-show fixedsticky">
          <a href="#toc" class="toc-show__label js-toc-show" aria-controls="toc">
            Table of contents <span class="toc-show__icon"></span>
          </a>
        </div>

      <div class="app-pane__body">
          <div class="app-pane__toc">
            <div class="toc" data-module="table-of-contents">
              <div class="search" data-module="search">
  <form action="https://www.google.co.uk/search" method="get" role="search">
    <input type="hidden" name="as_sitesearch" value="https://docs.publishing.service.gov.uk"/>
    <label class="govuk-label search__label" for="search">
      Search (via Google)
    </label>
    <input class="govuk-input govuk-!-margin-bottom-4" id="search" name="q" type="text" aria-controls="search-results" placeholder="Search">
  </form>
  <div id="search-results" class="search-results" aria-hidden="true" role="dialog" aria-labelledby="search-results-title">
    <div class="search-results__inner">
      <button class="search-results__close">Close<span class="search-results__close-label"> search results</span></button>
      <h2 id="search-results-title" class="search-results__title" aria-live="polite">Results</h2>
      <div class="search-results__content"></div>
    </div>
  </div>
</div>

              <a href="#" class="toc__close js-toc-close" aria-controls="toc" aria-label="Hide table of contents"></a>
              <nav id="toc" class="js-toc-list toc__list" aria-labelledby="toc-heading">
                  <a href='/manual.html' class="toc__back-link govuk-link">&lsaquo; Manual</a>
  <ul>
  <li>
    <a href="#header"><span>The development and deployment pipeline</span></a>
    <ul>
      <li>
        <a href="#wait-for-continuous-integration-to-pass"><span>Wait for Continuous Integration to pass</span></a>
      </li>
      <li>
        <a href="#review-your-own-changes"><span>Review your own changes</span></a>
        <ul>
          <li>
            <a href="#heroku-app-review"><span>Heroku App Review</span></a>
          </li>
          <li>
            <a href="#branch-deploy-review"><span>Branch Deploy Review</span></a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#get-someone-to-review-your-pull-request"><span>Get someone to review your Pull Request</span></a>
      </li>
      <li>
        <a href="#check-if-there-is-a-deploy-freeze"><span>Check if there is a deploy freeze</span></a>
      </li>
      <li>
        <a href="#merge-your-own-pull-request"><span>Merge your own Pull Request</span></a>
      </li>
      <li>
        <a href="#deployment"><span>Deployment</span></a>
        <ul>
          <li>
            <a href="#continuous-deployment"><span>Continuous Deployment</span></a>
          </li>
          <li>
            <a href="#manual-deployment"><span>Manual Deployment</span></a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
</ul>


              </nav>
            </div>
          </div>

        <div class="app-pane__content toc-open-disabled">
          <main id="content" class="technical-documentation" data-module="anchored-headings">
            
  <p><a href='/manual.html#deployment'>Deployment</a></p> <h1 id='header'>The development and deployment pipeline</h1><blockquote>
<p>When responding to a security incident, you should make any code changes in private, so that you don&rsquo;t accidentally disclose the vulnerability. To do this, follow the instructions for <a href="/manual/make-github-repo-private.html">making a repo private</a>.</p>
</blockquote>
<p>Our development and deployment pipeline looks like this:</p>

<ol>
<li>Open a Pull Request (PR)</li>
<li><a href="#wait-for-continuous-integration-to-pass">Wait for Continuous Integration to pass</a></li>
<li><a href="#review-your-own-changes">Review your own changes</a></li>
<li><a href="#get-someone-to-review-your-pull-request">Get someone to review your Pull Request</a></li>
<li><a href="#check-if-there-is-a-deploy-freeze">Check if there is a deploy freeze</a></li>
<li><a href="#merge-your-own-pull-request">Merge your own Pull Request</a></li>
<li><a href="#deployment">Deploy through each of the environments</a></li>
</ol>
<h2 id='wait-for-continuous-integration-to-pass'>Wait for Continuous Integration to pass</h2><p>When a Pull Request (PR) is opened, it often triggers an automated
job, which typically lints the code and runs the tests.</p>
<p>Increasingly we&rsquo;re using <a href="/manual/test-and-build-a-project-with-github-actions.html">GitHub Actions</a>
to perform these checks, but historically we&rsquo;ve run these jobs on
<a href="/manual/test-and-build-a-project-on-jenkins-ci.html">our CI infrastructure</a>.
Some applications also trigger a run of the <a href="/manual/publishing-e2e-tests.html">end-to-end tests</a>.</p>
<h2 id='review-your-own-changes'>Review your own changes</h2><p>As well as double-checking your code and commits, you may refer
to the following:</p>
<h3 id='heroku-app-review'>Heroku App Review</h3><p>Sometimes you may need to demo a running version of your change.
All frontend applications and some publishing apps have
<a href="/manual/review-apps.html">Heroku Review Apps</a> enabled, with a
link near the bottom of each PR.</p>
<h3 id='branch-deploy-review'>Branch Deploy Review</h3><p>Sometimes you may need to deploy your change in Integration in
order to test it works on real infrastructure. Go to
<a href="https://deploy.integration.publishing.service.gov.uk/job/Deploy_App/">the <code>Deploy_App</code> job in Jenkins</a>
and click &lsquo;Build with Parameters&rsquo;:</p>

<ul>
<li><code>TARGET_APPLICATION</code> - the name of the repository you want to deploy</li>
<li><code>DEPLOY_TASK</code> - usually &lsquo;deploy&rsquo; is most appropriate</li>
<li><code>TAG</code> - put the name of your branch</li>
<li>Typically you can leave the checkboxes as they are</li>
</ul>
<h2 id='get-someone-to-review-your-pull-request'>Get someone to review your Pull Request</h2><p>The GDS Way has guidelines on <a href="https://gds-way.cloudapps.digital/manuals/code-review-guidelines.html">how to review code</a>.</p>
<p>Only when the tests pass and the code has been approved the Pull Request can be merged, since we&rsquo;ve
<a href="/manual/configure-github-repo.html">configured GitHub to prevent merges</a> otherwise.</p>
<h2 id='check-if-there-is-a-deploy-freeze'>Check if there is a deploy freeze</h2><p>In exceptional circumstances, we may wish to block or <em>freeze</em>
deployments for a short period of time. This should be done by
checking &ldquo;Freeze deployments?&rdquo; and adding an explanatory note
to the application in the <a href="https://release.publishing.service.gov.uk">Release app</a>.</p>

<blockquote>
<p>Checking &ldquo;Freeze deployments?&rdquo; will turn off all automatic
deployments for the application. You can still deploy urgent
changes manually if necessary.</p>
</blockquote>
<p>When a deploy freeze is in effect, you should avoid merging any PRs.
This is because your changes may block other, urgent changes related
to the deploy freeze. Your changes will also remain undeployed for a
long time.</p>

<blockquote>
<p>People don&rsquo;t always check the Release app before merging their PRs.
If you need to freeze deployments for an application, you should
also make people aware using other channels.</p>
</blockquote>
<h2 id='merge-your-own-pull-request'>Merge your own Pull Request</h2><p>We&rsquo;ve got <a href="/manual/merge-pr.html">guidelines on merging of Pull Requests</a>.</p>
<p>Some applications <a href="https://github.com/alphagov/govuk-saas-config/blob/master/github/repo_overrides.yml">have restrictions on who can merge PRs</a>.
If you are unable to merge your own PR, you should ask
<a href="https://github.com/orgs/alphagov/teams/gov-uk-production/members">someone else</a>
to merge (and deploy) it for you.</p>
<p>Code that is merged to <code>master</code> is tested again on CI. This is because
the <code>master</code> branch may have changed since the tests last ran on the PR.
If the tests on <code>master</code> pass, Jenkins pushes a <code>release_123</code> git tag to
GitHub.</p>

<blockquote>
<p><strong>WARNING</strong>: some applications have Continuous Deployment enabled,
which means the deployment process is fully automated. You should do
any manual testing with <a href="#branch-deploy-review">a temporary, branch deployment</a>
before you merge.</p>
</blockquote>
<h2 id='deployment'>Deployment</h2><p>Teams are responsible for deploying their own work. We believe that
<a href="https://gds.blog.gov.uk/2012/11/02/regular-releases-reduce-risk">regular releases minimise the risk of major problems</a>
and improve recovery time. The <a href="/manual/welcome-to-2nd-line.html">2nd line team</a>
is responsible for providing access to deploy software for teams who can&rsquo;t deploy it themselves.</p>
<h3 id='continuous-deployment'>Continuous Deployment</h3>
<ul>
<li>Check the notes in the <a href="https://release.publishing.service.gov.uk">Release app</a> to see if Continuous Deployment is enabled.</li>
<li>If so, after merging, you should check the Release app to see if the deployment succeeds.</li>
<li>If the latest release is not on Production within about 15 minutes, something went wrong:

<ul>
<li>Refer to the <a href="https://docs.google.com/presentation/d/1A0zdYHwOxV2jO_0YVsKplySXvd777pXDwn1YnETXSh8/edit">Continuous Deployment Demo slides</a> for details of the deployment process so you can pinpoint where in the pipeline it failed.</li>
<li>You can manually deploy your change if the automation fails e.g. due to a flakey <a href="https://github.com/alphagov/smokey">Smokey test</a>.</li>
</ul></li>
</ul>
<h3 id='manual-deployment'>Manual Deployment</h3><h4 id='wait-for-the-release-to-deploy-to-integration'>Wait for the release to deploy to Integration</h4><p>When a new release is created, CI sends a message to Integration Deploy
Jenkins to deploy the tag and run <a href="https://github.com/alphagov/smokey">Smokey</a>. You should verify
your changes work in Integration before deploying downstream:</p>

<ul>
<li>Check the results of the <a href="https://github.com/alphagov/smokey">smoke tests</a>.</li>
<li>Look for any Icinga alerts related to your application.</li>
</ul>
<p>Our apps should always be in a state where <code>master</code> is deployable. You
should raise a PR to revert your changes if they cause a problem and
you&rsquo;re unable to resolve that problem straight away.</p>
<h4 id='manually-deploy-to-staging-then-production'>Manually deploy to Staging, then Production</h4><p>Deployments to these environments are manual and require
<a href="/manual/rules-for-getting-production-access.html">production access</a>.
Go to the <a href="https://release.publishing.service.gov.uk">Release application</a> and find the application you
want to deploy, then select the release tag you want to deploy.
Follow these rules:</p>

<ul>
<li>Deployments should generally take place between 9.30am and 5pm
(4pm on Fridays), the core hours when most people are in the office.</li>
<li>If there&rsquo;s other people&rsquo;s code to deploy, ask them whether they&rsquo;re
okay for the changes to go out.</li>
<li>Announce in <code>#govuk-2ndline</code> if you anticipate your release causing
any issues. Stay around for a while just in case something goes wrong.</li>
<li>Check the <a href="https://release.publishing.service.gov.uk">Release app</a> for a deploy note for the application,
to see if there are any special instructions or reasons not to deploy.
Individual app deploy freezes are usually announced here.</li>
</ul>
<p>After a deployment:</p>

<ul>
<li><a href="/manual/error-reporting.html">Check Sentry for any new errors</a>.</li>
<li>Look for <a href="/manual/icinga.html">any Icinga alerts</a> related to your application.</li>
<li>Check the <a href="/manual/deployment-dashboards.html">Deployment Dashboard</a> for any issues.</li>
<li>Check the results of the <a href="https://github.com/alphagov/smokey">smoke tests</a>.</li>
</ul>


  <div class='related-content'>

    <h3>More in the Deployment section</h3>

    <div class='govuk-grid-row'>

        <div class='govuk-grid-column-one-half'>
          <h4>How to...</h4>

          <ul class="govuk-list">
            <li><a href="/manual/deploy-puppet.html">Deploy Puppet</a></li>
            <li><a href="/manual/deploy-static.html">Deploy Static</a></li>
            <li><a href="/manual/deploying-terraform.html">Deploy Terraform</a></li>
            <li><a href="/manual/github-unavailable.html">Deploy when GitHub is unavailable</a></li>
            <li><a href="/manual/deployment-dashboards.html">Deployment dashboards</a></li>
            <li><a href="/manual/fall-back-to-aws-cloudfront.html">Fall back to AWS CloudFront</a></li>
            <li><a href="/manual/fall-back-to-mirror.html">Fall back to the static mirrors</a></li>
            <li><a href="/manual/encrypted-hiera-data.html">Handle encrypted hieradata</a></li>
            <li><a href="/manual/publish-special-routes.html">Publish special routes</a></li>
            <li><a href="/manual/restart-application.html">Restart an application</a></li>
            <li><a href="/manual/running-rake-tasks.html">Run a rake task</a></li>
            <li><a href="/manual/review-apps.html">Set up Heroku review apps for pull requests</a></li>
            <li><a href="/manual/howto-switch-off-app.html">Switch an app off temporarily</a></li>
          </ul>
        </div>

    </div>
</div>


              <div data-module='page-expiry' data-last-reviewed-on="2020-12-10">
    <div class='page-expiry--not-expired'>
      This page was last reviewed on 10 June 2020.

        It needs to be reviewed again on 10 December 2020
        by the page owner <a href="">#govuk-developers</a>
        .
    </div>

    <div class='page-expiry--expired'>
      This page was set to be reviewed before 10 December 2020
       by the page owner <a href="">#govuk-developers</a>.
      This might mean the content is out of date.
    </div>
  </div>

          </main>

          <aside>
              <ul class="contribution-banner">
                <li><a href="https://github.com/alphagov/govuk-developer-docs/blob/master/source/manual/development-pipeline.html.md">View source</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs/issues/new?labels=bug&amp;title=Re:%20'The%20development%20and%20deployment%20pipeline'&amp;body=Problem%20with%20'The%20development%20and%20deployment%20pipeline'%20(https://docs.publishing.service.gov.uk/manual/development-pipeline.html)">Report problem</a></li>
                <li><a href="https://github.com/alphagov/govuk-developer-docs">GitHub Repo</a></li>
              </ul>
          </aside>

          <footer class="govuk-footer app-footer" role="contentinfo">
  <div class="govuk-footer__meta">
    <div class="govuk-footer__meta-item govuk-footer__meta-item--grow">


      <svg
        aria-hidden="true"
        focusable="false"
        class="govuk-footer__licence-logo"
        xmlns="http://www.w3.org/2000/svg"
        viewbox="0 0 483.2 195.7"
        height="17"
        width="41"
      >
        <path
          fill="currentColor"
          d="M421.5 142.8V.1l-50.7 32.3v161.1h112.4v-50.7zm-122.3-9.6A47.12 47.12 0 0 1 221 97.8c0-26 21.1-47.1 47.1-47.1 16.7 0 31.4 8.7 39.7 21.8l42.7-27.2A97.63 97.63 0 0 0 268.1 0c-36.5 0-68.3 20.1-85.1 49.7A98 98 0 0 0 97.8 0C43.9 0 0 43.9 0 97.8s43.9 97.8 97.8 97.8c36.5 0 68.3-20.1 85.1-49.7a97.76 97.76 0 0 0 149.6 25.4l19.4 22.2h3v-87.8h-80l24.3 27.5zM97.8 145c-26 0-47.1-21.1-47.1-47.1s21.1-47.1 47.1-47.1 47.2 21 47.2 47S123.8 145 97.8 145"
        />
      </svg>
      <span class="govuk-footer__licence-description">
        All content is available under the
        <a
          class="govuk-footer__link"
          href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/"
          rel="license"
        >Open Government Licence v3.0</a>, except where otherwise stated
      </span>
    </div>
    <div class="govuk-footer__meta-item">
      <a
        class="govuk-footer__link govuk-footer__copyright-logo"
        href="https://www.nationalarchives.gov.uk/information-management/re-using-public-sector-information/uk-government-licensing-framework/crown-copyright/"
      >© Crown copyright</a>
    </div>
  </div>
</footer>

        </div>
      </div>
    </div>

    
    <script src="/javascripts/application.js"></script>
  </body>
</html>
